[["index.html", "今日からできる再現可能な論文執筆 1 はじめに 1.1 TWS概要", " 今日からできる再現可能な論文執筆 国里愛彦(専修大学)・竹林由武（福島県立医科大学） 2020/10/31(土) 10:00-12:00 1 はじめに 本サイトは，日本心理学会第84回大会(以下，JPA2020)のチュートリアルワークショップ(以下，TWS)002「今日からできる再現可能な論文執筆」の事前準備と当日の演習用サイトになります。本サイトもRStudioとRMarkdown(Bookdown)を使って作成されています。左の目次をクリックして移動か，＞をクリックして次のページに移動ください。 1.1 TWS概要 TWSの概要は以下になります。 再現性の危機への対処として，データ処理から論文執筆までの一連のプロセスの再現性を高める取り組みへの注目が高まっている。論文完成までには，（1）データの前処理，（2）統計解析，（3）論文の執筆の3 段階があり，それぞれの段階において異なるソフトウェアを用いることが多い。例えば，Excel でデータの前処理をし，SPSS で統計解析して，結果をWord にコピー＆ペーストして本文を執筆するなどである。それぞれの段階においてアドホックな手続きがとられ，その都度ソフトウェアが切り替えられることで，各段階と移行において再現可能性が低くなる危険性がある。本チュートリアルでは，R （RStudio）とRMarkdown を使ってデータの前処理から投稿可能な論文執筆までを行う方法を解説する。R（RStudio）やRMarkdown 初心者を想定し，執筆環境の整備から実際の執筆までできるようになることを目指す。 "],["02.html", "2 事前準備（Dockerとは） 2.1 解析環境の違うと結果が再現しない？ 2.2 Dockerでコードだけでなく解析環境の再現性も保つ 2.3 Rocker: RとRstudio用のDocker 2.4 統計解析でDockerを導入する利点", " 2 事前準備（Dockerとは） 2.1 解析環境の違うと結果が再現しない？ コンピュータが計算するものは正しそうに見えますが，Rを含む統計ソフトが返す結果はいつでも一貫しているとは限りません。例えば，コンピュータのOSの種類，統計解析ソフトのバージョン，Rの場合はパッケージのバージョンによって出力される結果は異なることがあります。最近は，データや解析コードの公開が進んできています。しかし，このような統計解析を実行する環境の違いが，再現性を低めている可能性があります。 2.2 Dockerでコードだけでなく解析環境の再現性も保つ 解析環境の再現性のために，データやコードを公開・共有するだけでなく，解析環境やバージョン情報も公開する必要があります。ただ，なかなか公開するだけだと，論文作成時と同じ解析環境を作るのは難しかったりします。例えば，古いOSで動作するソフトじゃないと解析が再現できない場合，そのOSやソフトを用意するのは難しいかもしれません（実際，研究でつかわれたプログラムが公開されていたが，現在使われているOSでは動作せず，古いOSも用意することが不可能なことがありました）。 OSとソフト（Rの場合はパッケージも）をまとめて配布できると解析環境の再現性が担保できるかもしれません。WindowsやMacの場合は難しいですが，Linux上で動作するようなソフトの場合は，OSとソフトを含んだものをまとめて（まとめたものをコンテナといいます）配布することもできます。このような，OSに依存せずに，Linuxベースのアプリケーションをコンテナ化する技術をDockerと呼びます。以下の図のように，Dockerを使うとOSとソフトをまとめたコンテナをイメージとして配布可能になります。配布が可能ということは，統計解析環境の共有も可能になります。そして，Docker Hub(https://hub.docker.com/ )では，多数のイメージが公開されているので，興味のあるものを使うことができます。 2.3 Rocker: RとRstudio用のDocker 今回の場合は，OS(Ubuntsと呼ばれるLinux)とソフト（RとIDEのRStudio）とRパッケージをまとめたコンテナを使います。自作もできますが，結構大変ですので，既に公開されているものを使います。RやRstudio用のDockerコンテナをつくるRockerプロジェクト(https://hub.docker.com/u/rocker)1が公開したイメージが便利なので，今回のTWSでも使用します。 Rockerプロジェクト2でも十分なのですが，よく使うパッケージなどは事前に入れられていると便利です。特にベイズ統計で用いるRstanなどはインストールがちょっと面倒なので，事前にそれらが入っていると便利かと思います。そこで，私は心理学で使いそうなRでパッケージをRockerプロジェクトのVerseというコンテナにたくさん追加した自作Dockerイメージ(ykunisato/paper-r)を作って公開しています(https://hub.docker.com/u/ykunisato)。今回のTWSでは，私が作成したpaper-rというDockerイメージを使います。 2.4 統計解析でDockerを導入する利点 最後に，Dockerを導入する利点を以下に挙げておきます。 統計解析環境を再現可能にできる（使ったDockerイメージを配布すればいいだけ） 最初にDockerさえインストールできれば，あとはコマンド１つで，簡単に面倒なソフトのインストールなどが終わる プラウザで作業ができるので，今どきの仕事スタイルにあっている かっこいい (マニア向け)もしサーバー上にDockerを導入すれば，簡単に自分のサーバーでサービスを稼働できる（iPadからブラウザを通してRstudioが使える！）。 Nüst, D., Eddelbuettel, D., Bennett, D., Cannoodt, R., Clark, D., Daróczi, G., Edmondson, M., Fay, C., Hughes, E., Kjeldgaard, L., Lopp, S., Marwick, B., Nolis, H., Nolis, J., Ooi, H., Ram, K., Ross, N., Shepherd, L., Sólymos, P., … Xiao, N. (2020). The Rockerverse: Packages and Applications for Containerisation with R. The R Journal, 12(1), 437.↩︎ Nüst, D., Eddelbuettel, D., Bennett, D., Cannoodt, R., Clark, D., Daróczi, G., Edmondson, M., Fay, C., Hughes, E., Kjeldgaard, L., Lopp, S., Marwick, B., Nolis, H., Nolis, J., Ooi, H., Ram, K., Ross, N., Shepherd, L., Sólymos, P., … Xiao, N. (2020). The Rockerverse: Packages and Applications for Containerisation with R. The R Journal, 12(1), 437.↩︎ "],["03.html", "3 事前準備(Windows編) 3.1 Dockerを用いたR解析環境構築 3.2 Dockerが使えない場合", " 3 事前準備(Windows編) 3.1 Dockerを用いたR解析環境構築 3.1.1 Windows10のエディションを確認する（ProかHomeか） 多くの方が，Windows10をお使いだとは思いますが，そのエディションによってDockerの導入方法が異なります。以下の解説どうかで，ご自身のパソコンのWindowsがProかHomeのどちらかをご確認ください。 3.1.2 Windows10がProエディションの場合の導入方法 Windows10 Proエディションの方は以下の動画を参考にDockerを導入なさってください。 コマンドプロンプトに打ち込むDocker用のコード(XXXXXの部分はご自身用に改変ください)。ローカルで，ご自身が所有しているパソコンでの利用を想定しているのでパスワードはpaperに固定しています。 docker run -e PASSWORD=paper -e DISABLE_AUTH=true -p 8787:8787 -v /c/user/XXXXX/Document:/home/rstudio -d --name paper ykunisato/paper-r 3.1.3 Windows10がHomeエディションの場合の導入方法 Windows10 Homeエディションの方は以下の動画を参考にDockerを導入なさってください。 コマンドプロンプトに打ち込むDocker用のコード(XXXXXの部分はご自身用に改変ください)。ローカルで，ご自身が所有しているパソコンでの利用を想定しているのでパスワードはpaperに固定しています。 docker run -e PASSWORD=paper -e DISABLE_AUTH=true -p 8787:8787 -v /c/user/XXXXX/Document:/home/rstudio -d --name paper ykunisato/paper-r 3.2 Dockerが使えない場合 以下のソフトとパッケージをインストールください。 R(https://www.r-project.org/) Rstudio(https://rstudio.com/) デモのコードを実施した場合にインストールするか聞かれるので，その都度インストールください。 "],["04.html", "4 事前準備(Mac編) 4.1 Dockerを用いたR解析環境構築 4.2 Dockerが使えない場合", " 4 事前準備(Mac編) 4.1 Dockerを用いたR解析環境構築 Macユーザーの方は，以下の動画を参考にDockerを導入ください。 ターミナルには以下のコマンドを入力します（適宜，PASSWORDやnameは好みに変更ください）。 docker run -e PASSWORD=paper -e DISABLE_AUTH=true -p 8787:8787 -v $PWD:/home/rstudio -d --name paper ykunisato/paper-r 4.2 Dockerが使えない場合 以下のソフトとパッケージをインストールください。 4.2.1 ソフト R(https://www.r-project.org/) Rstudio(https://rstudio.com/) 4.2.2 Rパッケージ デモのコードを実施した場合にインストールするか聞かれるので，その都度インストールください。 "],["05.html", "5 事前準備(その他) 5.1 文献管理ソフト 5.2 Githubアカウント", " 5 事前準備(その他) 5.1 文献管理ソフト Paperpile Zotero dockerではzotero connectionは使えない（あとそうじゃなくても使えるまでの設定がややこしい）。今回は，シンプルさを重視して，あくまで文献の管理とbibtexの出力ソフトという位置づけにしておく。 5.2 Githubアカウント https://kunisatolab.github.io/main/how-to-github.html "],["06.html", "6 オマケ：renvでRパッケージのバージョン管理もしちゃおう！", " 6 オマケ：renvでRパッケージのバージョン管理もしちゃおう！ mkdir renv docker run -e PASSWORD=paper -e DISABLE_AUTH=true -e RENV_PATHS_CACHE=/home/rstudio/.local/share/renv/cache -p 8787:8787 -v $PWD:/home/rstudio -v $PWD/renv:/home/rstudio/.local/share/renv/cache -d --name paper ykunisato/paper-r renv::init() &gt; renv::init() * Initializing project ... * Discovering package dependencies ... Done! * Copying packages into the cache ... [19/19] Done! The following package(s) will be updated in the lockfile: # GitHub ============================= - renv [* -&gt; rstudio/renv@HEAD] # RSPM =============================== - base64enc [* -&gt; 0.1-3] - bookdown [* -&gt; 0.21] renv::snapshot() &gt; renv::snapshot() * The lockfile is already up to date. "],["07.html", "7 Rmarkdownで英語論文を書いてみよう！", " 7 Rmarkdownで英語論文を書いてみよう！ TWS当日(2020/10/31(土) 10:00-12:00)に解説します。 "],["08.html", "8 日本語論文を書こう！", " 8 日本語論文を書こう！ TWS当日(2020/10/31(土) 10:00-12:00)に解説します。 "],["09.html", "9 ウェブサイトやスライドを作ろう!", " 9 ウェブサイトやスライドを作ろう! TWS当日(2020/10/31(土) 10:00-12:00)に解説します。 "]]
